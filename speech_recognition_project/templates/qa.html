<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 问答</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/qa.css') }}">
</head>
<body>
    <!-- 顶部导航栏 -->
    <div class="top-navbar">
        <div class="nav-content">
            <a href="{{ url_for('index') }}" class="nav-title">Wegather</a>
            <div class="nav-right">
                <div class="settings-dropdown">
                    <button class="settings-btn" title="设置">⚙</button>
                    <div class="dropdown-content">
                        <a href="/qa">AI对话 🗣️</a>
                        <a href="/mental_diary">心情日记 📓</a>
                        <a href="/mood_analysis">数据分析 📊</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 侧边栏 -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h3>
                <span id="chatTypeText">文字对话</span>
                <button id="toggleChatType" class="toggle-btn">📕</button>
            </h3>
        </div>
        <button id="newChatButton" class="new-chat-btn">新对话</button>
        <button id="clearHistoryButton" class="clear-chat-btn">清空对话</button>
        <div class="history-divider">历史记录</div>
        <div class="chat-list" id="chatList">
            <!-- 对话列表将通过 JavaScript 动态生成 -->
        </div>
 
    </div>

    <div class="main-content">
        <div class="chat-container" id="chat-container">
            <!-- AI 初始消息 -->
            <div class="message ai-message">
                <div class="message-content">
                    你好！我是你的 AI 语音助手。你可以直接输入文字，或点击下方麦克风按钮进行语音输入。
                </div>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <form id="chatForm" class="input-form">
                    <input type="text" class="chat-input" id="textInput" 
                           placeholder="输入消息或点击麦克风语音输入..." autocomplete="off">
                    <div class="button-group">
                        <button type="button" class="voice-btn" id="recordButton" title="点击开始语音输入">
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                                <path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                            </svg>
                        </button>
                        <button type="submit" class="send-btn" title="发送消息">
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                </form>
            </div>
            <div class="input-footer">
                AI助手仅供参考，请勿过分依赖
            </div>
        </div>
    </div>

    <!-- 在底部引入外部 JavaScript 文件 -->
    <script src="{{ url_for('static', filename='js/diary.js') }}"></script>
    <script src="{{ url_for('static', filename='js/qa.js') }}"></script>

</body>
</html>